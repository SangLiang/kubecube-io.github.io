<!doctype html><html lang=zh class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.81.0"><link rel=canonical type=text/html href=https://kubecube-io.github.io/docs/user-guide/><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>产品使用指南 | KubeCube</title><meta name=description content="开源容器平台"><meta property="og:title" content="产品使用指南"><meta property="og:description" content="开源容器平台"><meta property="og:type" content="website"><meta property="og:url" content="https://kubecube-io.github.io/docs/user-guide/"><meta property="og:site_name" content="KubeCube"><meta itemprop=name content="产品使用指南"><meta itemprop=description content="开源容器平台"><meta name=twitter:card content="summary"><meta name=twitter:title content="产品使用指南"><meta name=twitter:description content="开源容器平台"><link rel=preload href=/scss/main.min.810b672b8acd789a78e1ee9e004e599d749572bd1fbb0d001f26f2e5c568c907.css as=style><link href=/scss/main.min.810b672b8acd789a78e1ee9e004e599d749572bd1fbb0d001f26f2e5c568c907.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg width="4984" height="1e3" viewBox="0 0 4984 1e3" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3551.54 432.823C3552.84 435.556 3555.59 437.298 3558.62 437.298H3658.46C3663.69 437.298 3667.45 432.277 3665.98 427.259 3634.56 319.831 3535.31 241.352 3417.7 241.352H3402.03c-142.85.0-258.65 115.801-258.65 258.648v31.352c0 142.847 115.8 258.648 258.65 258.648H3417.7c117.61.0 216.86-78.48 248.28-185.907C3667.45 599.075 3663.69 594.054 3658.46 594.054H3558.62C3555.59 594.054 3552.84 595.796 3551.54 598.529 3526.37 651.507 3472.39 688.108 3409.87 688.108 3323.29 688.108 3253.11 617.926 3253.11 531.352V5e2C3253.11 413.426 3323.29 343.243 3409.87 343.243c62.52.0 116.5 36.601 141.67 89.58z" fill="#333"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4970.89 651.516C4972.68 646.419 4968.9 641.081 4963.5 641.081H4867.67C4865.09 641.081 4862.68 642.35 4861.21 644.474 4842.85 671.15 4813.84 688.108 4781.45 688.108 4736.6 688.108 4698.03 655.443 4685.65 609.73h288.5C4978.15 609.73 4981.51 606.719 4981.95 602.744 4982.82 594.747 4983.27 586.616 4983.27 578.378c0-116.507-90-211.621-201.820000000001-211.621-111.83.0-201.83 95.114-201.83 211.621S4669.62 790 4781.45 790C4868.6 790 4942.57 732.144 4970.89 651.516zM4781.45 468.649C4819.59 468.649 4853.14 492.229 4869.98 527.433H4692.92C4709.75 492.229 4743.3 468.649 4781.45 468.649z" fill="#333"/><path d="M3727 386C3727 381.582 3730.58 378 3735 378h86C3825.42 378 3829 381.582 3829 386V612.5C3829 654.197 3862.8 688 3904.5 688s75.5-33.803 75.5-75.5V386C3980 381.582 3983.58 378 3988 378h86C4078.42 378 4082 381.582 4082 386V770C4082 774.418 4078.42 778 4074 778h-86C3983.58 778 3980 774.418 3980 770V764.6C3954.53 780.689 3924.35 790 3892 790 3800.87 790 3727 716.127 3727 625V386z" fill="#333"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3072.22 651.516C3074.01 646.419 3070.22 641.081 3064.82 641.081H2968.99C2966.42 641.081 2964 642.35 2962.54 644.474 2944.17 671.15 2915.17 688.108 2882.77 688.108 2837.92 688.108 2799.35 655.443 2786.97 609.73h288.51C3079.48 609.73 3082.84 606.719 3083.27 602.744 3084.15 594.747 3084.59 586.616 3084.59 578.378c0-116.507-90-211.621-201.82-211.621s-201.82 95.114-201.82 211.621S2770.95 790 2882.77 790C2969.93 790 3043.9 732.144 3072.22 651.516zM2882.77 468.649C2920.92 468.649 2954.47 492.229 2971.3 527.433H2794.24C2811.07 492.229 2844.62 468.649 2882.77 468.649z" fill="#333"/><path d="M1342 770.243C1342 774.661 1345.58 778.243 1350 778.243H1435.89c4.41999999999985.0 8-3.58200000000011 8-8V592.206L1495.37 540.725l196.9 234.656C1693.79 777.193 1696.04 778.239 1698.4 778.239h112.12C1817.32 778.239 1821.02 770.302 1816.65 765.096L1567.7 468.401l244.74-244.744C1817.48 218.617 1813.91 210 1806.78 210H1685.31C1683.19 210 1681.16 210.843 1679.66 212.343L1443.89 448.109V218C1443.89 213.582 1440.31 210 1435.89 210H1350C1345.58 210 1342 213.582 1342 218V770.243z" fill="#333"/><path d="M1828 386C1828 381.582 1831.58 378 1836 378h86C1926.42 378 1930 381.582 1930 386V612.5c0 41.697 33.8 75.5 75.5 75.5s75.5-33.803 75.5-75.5V386C2081 381.582 2084.58 378 2089 378h86C2179.42 378 2183 381.582 2183 386V770C2183 774.418 2179.42 778 2175 778h-86C2084.58 778 2081 774.418 2081 770V764.6C2055.53 780.689 2025.35 790 1993 790 1901.87 790 1828 716.127 1828 625V386z" fill="#333"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2254 210C2249.58 210 2246 213.582 2246 218V770C2246 774.418 2249.58 778 2254 778h86C2344.42 778 2348 774.418 2348 770V757.487C2378.39 778.082 2414.4 790 2453 790c108.8.0 197-94.692 197-211.5S2561.8 367 2453 367C2414.4 367 2378.39 378.918 2348 399.513V218C2348 213.582 2344.42 210 2340 210h-86zm94 368.5c0 60.475 44.77 109.5 1e2 109.5s1e2-49.025 1e2-109.5S2503.23 469 2448 469s-1e2 49.025-1e2 109.5z" fill="#333"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4153 210C4148.58 210 4145 213.582 4145 218V770C4145 774.418 4148.58 778 4153 778h86C4243.42 778 4247 774.418 4247 770V757.487C4277.39 778.082 4313.4 790 4352 790c108.8.0 197-94.692 197-211.5S4460.8 367 4352 367C4313.4 367 4277.39 378.918 4247 399.513V218C4247 213.582 4243.42 210 4239 210h-86zm94 368.5C4247 638.975 4291.77 688 4347 688s1e2-49.025 1e2-109.5S4402.23 469 4347 469s-1e2 49.025-1e2 109.5z" fill="#333"/><path d="M554.586 39C564.593 21.6667 552.084.0 532.069.0H346.41c-35.726.0-68.739 19.0599-86.602 50L28.8676 450C11.0043 480.94 11.0042 519.06 28.8675 550L259.808 950C277.671 980.94 310.684 1e3 346.41 1e3H447.276C456.208 1e3 464.461 995.235 468.927 987.5L612.399 739C622.406 721.667 609.897 7e2 589.882 7e2H427.239C412.949 7e2 399.743 692.376 392.598 680L300.222 520C293.077 507.624 293.077 492.376 300.222 480l85.964-148.894L386 330.999 554.586 39z" fill="#0056ff"/><path d="M564.401 3e2C544.386 3e2 531.877 278.333 541.884 261L685.356 12.5C689.822 4.76496 698.075.0 707.006.0H808.29C844.017.0 877.03 19.06 894.893 50.0001L1125.83 450C1143.7 480.94 1143.7 519.06 1125.83 550L894.893 950C877.03 980.94 844.017 1e3 808.29 1e3H622.214C602.199 1e3 589.69 978.333 599.697 961L750.385 7e2H750.555L854.478 520C861.624 507.624 861.624 492.376 854.478 480L762.102 320C754.957 307.624 741.752 3e2 727.461 3e2H564.401z" fill="#0056ff"/></svg></span><span class="text-uppercase font-weight-bold">KubeCube</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>文档</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/kubecube-io/kubecube target=_blank><i class="fab fa-github"></i><span>GitHub</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off data-offline-search-index-json-src=/offline-search-index.6ea353f5f570cf29c0a3db968fa20e0f.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/docs/user-guide/>返回本页常规视图</a>.</p></div><h1 class=title>产品使用指南</h1><ul><li>1: <a href=#pg-991d31c65b93e655f58fd73d2744aa70>运维管理</a></li><ul><li>1.1: <a href=#pg-882b3bb80d835340e02c570d9efc20ee>用户管理</a></li><li>1.2: <a href=#pg-cc16e9ac86342c7d9c5ab1f4a64571b9>租户管理</a></li><li>1.3: <a href=#pg-e2d94e3b74b28c3cb9df52bbf9ca00b2>角色管理</a></li><li>1.4: <a href=#pg-0a268df46e46cb89462ce4c8762d20b6>配额管理</a></li><li>1.5: <a href=#pg-2306a8e0d2dc86a646a28d1621010f14>K8s集群管理</a></li><ul><li>1.5.1: <a href=#pg-62bae3e56f26c43c795878e3d6435987>多集群管理</a></li><li>1.5.2: <a href=#pg-5b8c71fac214fcac2dcfe6ebb573c677>集群级资源管理</a></li><ul><li>1.5.2.1: <a href=#pg-b58c5b5952e588cce8ddd5fcb7b7c0cc>存储类别(StorageClass)</a></li><li>1.5.2.2: <a href=#pg-84021fcd47af24336b3f2fa251e11490>存储声明(PV)</a></li><li>1.5.2.3: <a href=#pg-2faeb51dc0a9f8f4133fba56d59316c3>集群节点(Node)</a></li><li>1.5.2.4: <a href=#pg-cb1dd5ef4d6788bbe75c885d770b9a12>网络策略(NetworkPolicy)</a></li></ul></ul><li>1.6: <a href=#pg-4de4ac3e2c973d54322dc28a04e64999>操作审计</a></li></ul><li>2: <a href=#pg-4617c6f6a56d7cdbb27b726158991aaa>K8s资源管理</a></li><ul><li>2.1: <a href=#pg-f92399d03aa0a6430363c202d149c70d>工作负载管理</a></li><ul><li>2.1.1: <a href=#pg-7b012c2dd566d2198a61d60244ce1169>Deployment</a></li><li>2.1.2: <a href=#pg-500ff95d0a9229063602362156100f9c>StatefulSet</a></li><li>2.1.3: <a href=#pg-1c1715029a9653f311b6e7f2eae48dd4>Job</a></li><li>2.1.4: <a href=#pg-359ccce9eb5b678be164211be1ac6674>CronJob</a></li><li>2.1.5: <a href=#pg-d4b33d551e5eb6dd7a8d90fbeeaa23ae>Pod</a></li><li>2.1.6: <a href=#pg-567f7238e4941a79e1ce1cf4cac8a2d5>CRD</a></li><li>2.1.7: <a href=#pg-b0384913470a4be6d30a31aa6569ba7b>DaemonSet</a></li></ul><li>2.2: <a href=#pg-ee61de2534aadcceda73d6d0ab9b344e>服务与发现</a></li><ul><li>2.2.1: <a href=#pg-22aff6c7da936928435b042b223fe5c1>Service</a></li><li>2.2.2: <a href=#pg-866cdaed77cae1df8312e1634fe342d5>Ingress</a></li></ul><li>2.3: <a href=#pg-dfe90e26dd8c5f2bbd351b3c8a3f04f1>配置管理</a></li><ul><li>2.3.1: <a href=#pg-498270f9948d4c7c2fbbc06e6f83f203>Secret</a></li><li>2.3.2: <a href=#pg-c0919adee8d182e2019d6d5ebbb44d54>ConfigMap</a></li></ul><li>2.4: <a href=#pg-79b55e097198558e403125cdfbc32689>存储管理</a></li><ul><li>2.4.1: <a href=#pg-dc0724a49c70a4409332e139d6e548cc>PVC</a></li></ul><li>2.5: <a href=#pg-82e8b1c2057cbb52f8b8bf3f153fab19>其他</a></li><ul><li>2.5.1: <a href=#pg-cf4b1f8c4b2aa8cb554e7e20df5d61ff>密钥管理</a></li><li>2.5.2: <a href=#pg-ce8d51f35837b81d146741b8306c0c6f>Yaml 编排</a></li></ul></ul><li>3: <a href=#pg-d26f47acb6f925b7521fd59667a4a801>日志</a></li><ul><li>3.1: <a href=#pg-11d2cfb667600c3b8e11bc0885b7b986>采集任务管理</a></li><li>3.2: <a href=#pg-53c8ff58fbe5aeddb5e1755c6ffb3f3a>日志查询</a></li></ul><li>4: <a href=#pg-0ec2263ff6b9810ff122b6aed8649ca7>告警管理</a></li><ul><li>4.1: <a href=#pg-0c5f8f68798389347320b5964e58ebb2>告警规则管理</a></li><li>4.2: <a href=#pg-ebcc4bef1acb97bdd97392135c05263b>告警联系人管理</a></li><li>4.3: <a href=#pg-730f2f20353b81badf2cd1538e1cc349>告警历史</a></li></ul></ul><div class=content></div></div><div class=td-content><h1 id=pg-991d31c65b93e655f58fd73d2744aa70>1 - 运维管理</h1></div><div class=td-content><h1 id=pg-882b3bb80d835340e02c570d9efc20ee>1.1 - 用户管理</h1><p>本文档介绍了如何在 KubeCube 上创建、管理用户。</p><h2 id=准备工作>准备工作</h2><p>使用平台管理员账号登录 KubeCube。</p><h2 id=新增用户>新增用户</h2><p>1、使用平台管理员账号登录 KubeCube 后，展开【组织管理】菜单，点击【用户管理】，进入用户管理页面。</p><p><img src=/imgs/user-guide/administration/user/user-manage.png alt=user-manage></p><p>2、点击【新增用户】，填写用户信息。</p><p><img src=/imgs/user-guide/administration/user/user-add.png alt=user-add></p><ul><li>登录账号：<ul><li>不能超过253个字符；</li><li>只能包含小写字母、数字，以及'-' 和 &lsquo;.'；</li><li>须以字母数字开头；</li><li>须以字母数字结尾；</li><li>全局唯一标识，不允许重复，不允许修改。</li></ul></li><li>用户名：<ul><li>平台内展示的用户名，默认为登录账号。</li></ul></li><li>密码：<ul><li>长度不得少于8位且不大于20位；</li><li>至少应包括字母、数字以及特殊符号中两类。</li></ul></li><li>电话：<ul><li>符合中国手机号规范，如188****1234；</li><li>选填。</li></ul></li><li>Email：<ul><li>符合日常邮件地址规范；</li><li>选填。</li></ul></li></ul><p>点击【确定】，即创建该用户。</p><p>3、如果需要批量创建用户，可以点击【批量导入】-【下载模版】，填写表格内容后上传文件，即可批量创建表格内填写的用户。表格填写规范同上。</p><p><img src=/imgs/user-guide/administration/user/user-import.png alt=user-import></p><h2 id=用户管理>用户管理</h2><p>使用平台管理员账号登录 KubeCube 后，展开【组织管理】菜单，点击【用户管理】，进入用户管理页面。</p><p><img src=/imgs/user-guide/administration/user/user-manage.png alt=user-manage></p><p>在用户管理页面，可以看到平台内的所有用户，包括每个用户的登录账号、用户名、类型、状态、上次登录IP以及上次登录时间。</p><ul><li>类型：用户的登录方式，如果是使用账号密码登录，则类型为 &ldquo;normal&rdquo;；如果为其他登录方式，如LDAP、Github等通过第三方平台认证登录，则类型为对应的第三方平台名称。目前 KubeCube 只支持密码登录方式。</li><li>状态：分为启用和禁用，启用状态用户可正常登录，禁用状态用户不可登录。</li></ul><p>同时，平台管理员可以在该界面修改用户信息，包括用户密码、用户名、电话以及 Email，规范同上。用户登录账号不支持修改。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-cc16e9ac86342c7d9c5ab1f4a64571b9>1.2 - 租户管理</h1><p>本文档介绍了如何在 KubeCube 上进行租户管理，并管理租户下的项目和成员。</p><h2 id=准备工作>准备工作</h2><p>使用平台管理员或租户管理员账号登录 KubeCube。</p><h2 id=租户管理>租户管理</h2><h3 id=新增租户>新增租户</h3><p>1、使用平台管理员账号登录 KubeCube，展开【组织管理】菜单，点击【租户管理】，进入租户管理页面。</p><p>2、点击【新增租户】，填写租户信息。</p><p><img src=/imgs/user-guide/administration/tenant/add-tenant.png alt=tenant-manage></p><ul><li>租户名称：平台内展示的租户名。</li><li>租户标识：<ul><li>长度不得少于2位且不大于32位；</li><li>只能包含小写字母、数字，以及中划线 &lsquo;-&rsquo; ；</li><li>全局唯一标识，不允许重复，不允许修改。</li></ul></li></ul><h3 id=租户管理-1>租户管理</h3><p>使用平台管理员账号登录 KubeCube，展开【组织管理】菜单，点击【租户管理】，进入租户管理页面，可以查看到平台下所有的租户；使用租户管理员账号登录，进入租户管理页面，可以查看到该租户管理员所管理的所有租户。</p><p>同时可以在该界面快捷添加成员、添加项目、修改租户名称。</p><p><img src=/imgs/user-guide/administration/tenant/tenant-manage.png alt=tenant-manage></p><h2 id=项目管理>项目管理</h2><p>在租户管理页面点击上方的【项目】，切换到项目管理页面。</p><p><img src=/imgs/user-guide/administration/tenant/project-manage.png alt=project-manage></p><p>点击【新增项目】，即可添加项目：</p><ul><li>所属租户：选择权限内的已有租户；</li><li>项目名称：项目的展示名称；</li><li>项目标识：<ul><li>长度不得少于2位且不大于32位；</li><li>只能包含小写字母、数字，以及中划线 &lsquo;-&rsquo; ；</li><li>全局唯一标识，不允许重复，不允许修改。</li></ul></li><li>项目描述：对该项目的描述性语言。</li></ul><p>添加项目成功后，也可以在该页面直接为该项目或其他项目添加项目成员。</p><h2 id=成员管理>成员管理</h2><p>在租户管理页面点击上方的到【成员】，切换到成员管理页面。</p><p><img src=/imgs/user-guide/administration/tenant/member-manage.png alt=member-manage></p><p>点击【添加成员】，即可为指定的租户或项目添加成员。</p><ul><li>所属租户：选择权限内的租户；</li><li>所属项目：选择所选租户下的项目，如果选择【不指定】，则为添加租户成员，否则为项目成员；</li><li>账号：选择平台内的用户；</li><li>角色：指定所选用户的角色，如果【所属项目】选择【不指定】，则角色可设置为租户管理员或普通成员；如果【所属项目】选择具体项目，则角色可设置为项目管理员或普通成员。</li></ul><p>添加成员成功后，可以在该页面进行租户成员和项目成员的管理。同时可以在右上方，根据租户、项目、角色对成员进行过滤和搜索。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-e2d94e3b74b28c3cb9df52bbf9ca00b2>1.3 - 角色管理</h1><p>KubeCube 的角色管理基于 Kubernetes 的 RBAC 实现，对多集群提供了统一的认证鉴权功能</p><h2 id=内置角色>内置角色</h2><p>KubeCube 针对不同的层级，内置了相应的管理员角色和只有读权限的 reviewer 角色</p><table><thead><tr><th>权限\角色</th><th>platform-admin</th><th>tenant-admin</th><th>project-admin</th><th>reviewer</th></tr></thead><tbody><tr><td>集群管理</td><td>✓</td><td></td><td></td><td></td></tr><tr><td>角色管理</td><td>✓</td><td></td><td></td><td></td></tr><tr><td>角色查看</td><td>✓</td><td>✓</td><td>✓</td><td></td></tr><tr><td>用户管理</td><td>✓</td><td></td><td></td><td></td></tr><tr><td>节点管理</td><td>✓</td><td></td><td></td><td></td></tr><tr><td>所有租户管理</td><td>✓</td><td></td><td></td><td></td></tr><tr><td>所有租户成员管理</td><td>✓</td><td></td><td></td><td></td></tr><tr><td>本租户管理</td><td>✓</td><td>✓</td><td></td><td></td></tr><tr><td>本租户成员管理</td><td>✓</td><td>✓</td><td></td><td></td></tr><tr><td>所有项目管理</td><td>✓</td><td></td><td></td><td></td></tr><tr><td>所有项目成员管理</td><td>✓</td><td></td><td></td><td></td></tr><tr><td>租户下项目管理</td><td>✓</td><td>✓</td><td></td><td></td></tr><tr><td>租户下项目成员管理</td><td>✓</td><td>✓</td><td></td><td></td></tr><tr><td>本项目管理</td><td>✓</td><td>✓</td><td>✓</td><td></td></tr><tr><td>本项目成员管理</td><td>✓</td><td>✓</td><td>✓</td><td></td></tr><tr><td>管理 namespace</td><td>✓</td><td></td><td></td><td></td></tr><tr><td>管理工作负载</td><td>✓</td><td>✓</td><td>✓</td><td></td></tr><tr><td>管理卷</td><td>✓</td><td>✓</td><td>✓</td><td></td></tr><tr><td>管理 service</td><td>✓</td><td>✓</td><td>✓</td><td></td></tr><tr><td>管理 ingress</td><td>✓</td><td>✓</td><td>✓</td><td></td></tr><tr><td>管理 secrets</td><td>✓</td><td>✓</td><td>✓</td><td></td></tr><tr><td>管理 serviceaccout</td><td>✓</td><td>✓</td><td>✓</td><td></td></tr><tr><td>管理 subnamespaceanchor</td><td>✓</td><td>✓</td><td>✓</td><td></td></tr><tr><td>查看工作负载</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>查看卷</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>查看 service</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>查看 ingress</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>查看 secrets</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>查看 serviceaccout</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>查看 subnamespaceanchor</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr></tbody></table><blockquote><p>KubeCube 使用 <a href=https://github.com/kubernetes-sigs/hierarchical-namespaces>HNC</a> 来实现 tenant、project 和 namespace 的层级，以及彼此之间的隔离；为了实现 namespace 层级的隔离，除 platform-admin 外所有角色，通过 subnamespaceanchor 资源来管理 namespace</p></blockquote><h2 id=管理角色>管理角色</h2><p>通过角色标签栏来选择角色层级，点击【添加角色】来新建自定义角色，【继承已有】会以本层级的 admin 角色为模版新建出角色，【自定义】可以自定义编辑新角色</p><p><img src=/imgs/user-guide/administration/role/add-role.png alt=add-role.png></p><p>通过勾选具体的权限项来自定义角色的权限，点击【修改】提交修改</p><p><img src=/imgs/user-guide/administration/role/mgr-role.png alt=mgr-role.png></p></div><div class=td-content style=page-break-before:always><h1 id=pg-0a268df46e46cb89462ce4c8762d20b6>1.4 - 配额管理</h1><p>KubeCube 在 Kubernetes 原生的资源配额能力上进行了拓展，在租户层级即可对资源配额进行限制，在使用体验上与 Kubernetes 原生的 ResouceQuota 保持一致</p><blockquote><p>KubeCube 目前支持对 nvidia gpu 进行资源配额</p></blockquote><h2 id=资源配额结构>资源配额结构</h2><p><img src=/imgs/user-guide/administration/quota/resourcequota.png alt=resourcequota.png></p><p>资源配额的计算结构遵循以下约束：</p><ol><li>租户下 namespace 的资源配额总和 &lt; 租户配额</li><li>集群下租户的资源配额总和 &lt; 集群的物理资源</li></ol><blockquote><p>CubeResourceQuota 是 KubeCube 对于 namespace 级别的 ResourceQuota 的上层抽象，基于 CRD 实现</p></blockquote><h2 id=tenant-资源配额>Tenant 资源配额</h2><h3 id=前置要求>前置要求</h3><p>创建一个租户</p><h3 id=设置租户的资源配额>设置租户的资源配额</h3><p>选择租户，点击【调整配额】对指定集群下的租户进行资源配额的设置</p><p><img src=/imgs/user-guide/administration/quota/tenant-quota.png alt=tenant-quota.png></p><p>在可填框中填入期望设置的资源配额，点击【确定】保存配额设置</p><ul><li>【集群可分配】表示该集群剩余可分配资源</li><li>【租户已分配】表示该租户下所有 namespace 已分配的资源总和</li></ul><p><img src=/imgs/user-guide/administration/quota/modify-tenant-quota.png alt=modify-tenant-quota.png></p><h2 id=创建-namespace-并设置资源配额>创建 Namespace 并设置资源配额</h2><h3 id=前置要求-1>前置要求</h3><p>创建一个租户，在租户下创建项目</p><h3 id=设置-namespace-的资源配额>设置 namespace 的资源配额</h3><p>点击右上方【租户】选择框，选择租户，点击【创建空间】创建新的 namespace 并设置资源配额，也可以点击【修改】对已创建的 namespace 的资源配额进行修改</p><p><img src=/imgs/user-guide/administration/quota/ns-quota.png alt=ns-quota.png></p><p>创建 namespace 时，需要选择空间所属的集群、租户、项目，namespace 一旦创建，其所属关系不能更改。在可填框中填入期望的资源配额，点击【确定】使资源配额生效</p><p>【租户可分配】表示该 namespace 所属的租户所剩的可分配资源配额</p><p><img src=/imgs/user-guide/administration/quota/modify-ns-quota.png alt=modify-ns-quota.png></p></div><div class=td-content style=page-break-before:always><h1 id=pg-2306a8e0d2dc86a646a28d1621010f14>1.5 - K8s集群管理</h1></div><div class=td-content><h1 id=pg-62bae3e56f26c43c795878e3d6435987>1.5.1 - 多集群管理</h1><p>KubeCube 提供多集群管理的能力，可以基于管控集群添加或者删除集群，并对所有接管的集群提供统一的认证和鉴权入口</p><blockquote><p>⚠️ 计算集群信息不允许修改，若有修改需求，请先删除计算集群再重新添加，该操作存在的一定风险，删除计算集群期间，计算集群所有资源不受管控集群管控，认证和鉴权功能暂时关闭，直到该集群被重新添加</p></blockquote><h2 id=查看集群信息>查看集群信息</h2><p>选择集群查看对应的基本信息，Node、StorageClass、NetworkPolicy 以及 PV</p><p><img src=/imgs/user-guide/administration/k8s-cluster/multi-k8s-cluster-mgr/cluster-inspect.png alt=cluster-inspect></p><h2 id=添加计算集群>添加计算集群</h2><p><a href=https://www.kubecube.io/docs/installation-guide/add-member-k8s/#%E5%9C%A8%E8%8A%82%E7%82%B9%E4%B8%8A%E6%9E%84%E5%BB%BA%E6%96%B0%E9%9B%86%E7%BE%A4%E5%B9%B6%E6%B7%BB%E5%8A%A0>在节点上构建新集群并添加</a></p><p><a href=https://www.kubecube.io/docs/installation-guide/add-member-k8s/#%E6%B7%BB%E5%8A%A0%E5%B7%B2%E6%9C%89%E9%9B%86%E7%BE%A4>添加已有集群</a></p><h2 id=删除计算集群>删除计算集群</h2><p>点击【删除配置】来删除计算集群，管控集群无法通过 Console 删除。删除计算集群意味着 KubeCube 控制面不再接管该集群，该集群恢复被接管前的样子，集群上运行的工作负载、服务等不会受到影响，可以通过添加该集群来重新接管</p><p><img src=/imgs/user-guide/administration/k8s-cluster/multi-k8s-cluster-mgr/cluster-manager.png alt=cluster-manager></p></div><div class=td-content style=page-break-before:always><h1 id=pg-5b8c71fac214fcac2dcfe6ebb573c677>1.5.2 - 集群级资源管理</h1></div><div class=td-content><h1 id=pg-b58c5b5952e588cce8ddd5fcb7b7c0cc>1.5.2.1 - 存储类别(StorageClass)</h1><p>KubeCube 提供对 k8s <a href=https://kubernetes.io/zh/docs/concepts/storage/storage-classes/>StorageClass</a> 资源的原生管理能力</p><h2 id=查看-storageclass>查看 StorageClass</h2><p>点击【集群管理】，选择需要查看的集群，点击【存储类别】，查看该集群中所有的 StorageClass，可以在右上角搜索栏中输入资源名称进行模糊匹配，点击【删除】可删除此 StorageClass</p><p><img src=/imgs/user-guide/administration/k8s-cluster/cluster-scoped-res/StorageClass/view-storageclass.png alt=view-storageclass></p><h2 id=创建-storageclass>创建 StorageClass</h2><p>点击【创建存储类别】来创建新的 StorageClass</p><p><img src=/imgs/user-guide/administration/k8s-cluster/cluster-scoped-res/StorageClass/create-storageclass.png alt=create-storageclass></p></div><div class=td-content style=page-break-before:always><h1 id=pg-84021fcd47af24336b3f2fa251e11490>1.5.2.2 - 存储声明(PV)</h1><p><a href=https://kubernetes.io/zh/docs/concepts/storage/persistent-volumes/>PersistentVolume</a> 应该由集群管理员事先提供，KubeCube 对其拥有查看和删除的能力</p><h2 id=查看-persistentvolume>查看 PersistentVolume</h2><p>点击【集群管理】，选择需要查看的集群，点击【持久存储】来查看 PersistentVolume 详情，点击【删除】可以删除该资源</p><p><img src=/imgs/user-guide/administration/k8s-cluster/cluster-scoped-res/PV/pv.png alt=pv></p><p><img src=/imgs/user-guide/administration/k8s-cluster/cluster-scoped-res/PV/pv-view.png alt=pv-view></p></div><div class=td-content style=page-break-before:always><h1 id=pg-2faeb51dc0a9f8f4133fba56d59316c3>1.5.2.3 - 集群节点(Node)</h1><p>KubeCube 支持集群管理员通过 Console 页面管理各集群的 Node，也支持集群管理员直接使用黑屏操作对 各集群 Node 进行管理</p><h2 id=查看节点信息>查看节点信息</h2><p>点击 Node 名称来查看节点的具体信息，点击【更多】查看 Node 的所有标签，</p><p><img src=/imgs/user-guide/administration/k8s-cluster/cluster-scoped-res/Node/node-info.png alt=node-info></p><h2 id=添加节点>添加节点</h2><p>KubeCube 支持集群管理员通过黑屏操作来自行添加节点，也可以点击【添加节点】来使用 KubeCube 的脚本来进行节点添加</p><p>// todo：确认 master 和 node 节点的添加细节</p><p><img src=/imgs/user-guide/administration/k8s-cluster/cluster-scoped-res/Node/add-node.png alt=add-node></p><h2 id=节点操作>节点操作</h2><p>点击【编辑标签】来对节点的标签进行编辑</p><p><img src=/imgs/user-guide/administration/k8s-cluster/cluster-scoped-res/Node/edit-node.png alt=edit-labels></p><p>点击【禁止调度】来限制 pod 调度到该节点</p><p><img src=/imgs/user-guide/administration/k8s-cluster/cluster-scoped-res/Node/no-schedual.png alt=no-schedual></p><p>点击【更多】来对节点进行更多高级操作，包括：设置节点类型、设置污点、平滑迁移等</p><p><img src=/imgs/user-guide/administration/k8s-cluster/cluster-scoped-res/Node/edit-node.png alt=edit-node></p></div><div class=td-content style=page-break-before:always><h1 id=pg-cb1dd5ef4d6788bbe75c885d770b9a12>1.5.2.4 - 网络策略(NetworkPolicy)</h1><p><a href=https://kubernetes.io/zh/docs/concepts/services-networking/network-policies/>NetworkPolicy</a> 依赖 CNI 实现，创建一个 NetworkPolicy 资源对象而没有控制器来使它生效的话，是没有任何作用的，KubeCube 默认使用 calico</p><h2 id=查看-networkpolicy>查看 NetworkPolicy</h2><p>点击【集群管理】，选择要操作的集群，点击【网络策略】，点击【查看详情】可以查看 NetworkPolicy 的详细描述，点击【设置】可以对 NetworkPolicy 进行修改，点击【删除】可以删除该资源</p><p><img src=/imgs/user-guide/administration/k8s-cluster/cluster-scoped-res/NetworkPolicy/view-networkpolicy.png alt=view-networkpolicy></p><h2 id=创建-networkpolicy>创建 NetworkPolicy</h2><p>点击【创建网络策略】可以创建新的 NetworkPolicy</p><p><img src=/imgs/user-guide/administration/k8s-cluster/cluster-scoped-res/NetworkPolicy/create-networkpolicy.png alt=create-networkpolicy></p></div><div class=td-content style=page-break-before:always><h1 id=pg-4de4ac3e2c973d54322dc28a04e64999>1.6 - 操作审计</h1><p>本文档介绍了如何在 KubeCube 上查询和导出操作审计日志。</p><h2 id=准备工作>准备工作</h2><p>使用平台管理员账号登录 KubeCube。</p><h2 id=开启操作审计>开启操作审计</h2><p>部署好 KubeCube 后，操作审计功能默认开启。如果需要关闭或开启操作审计功能：</p><p>1、使用平台管理员账号登录 KubeCube；</p><p>2、点击页面右上角【切换到控制台】，点击任意空间，进入到控制台页面；</p><p>3、在左侧菜单栏点击【自定义资源CRD】，进入到集群级别 CRD 列表，可以点击右上方输入 &ldquo;hotplug&rdquo; 进行搜索，找到 “hotplugs.hotplug.kubecube.io” CRD，点击【v1】版本进入 CRD 详情页；</p><p>4、选择 common 实例，点击【设置YAML】，找到 spec - component - name: audit，将 “status” 改成 “disabled”，即关闭审计功能；改为 “enabled”，为开启审计功能。</p><p>详细配置说明见【部署指南】-【热插拔】。</p><h2 id=查询审计日志>查询审计日志</h2><p>使用平台管理员账号登录 KubeCube 后，展开【管控运维】菜单，点击【操作审计】，进入操作审计页面。</p><p><img src=/imgs/user-guide/administration/audit/audit-manage.png alt=audit-manage></p><p>如图所示，在该页面展示出了所有的审计日志，包括审计操作者的账号、操作的时间、IP地址、事件名称、资源、状态。同时平台管理员也可以根据账号、IP地址等进行过滤查询。</p><h2 id=导出审计日志>导出审计日志</h2><p>在操作审计页面，对审计日志查询后，点击【导出】，即可对查询结果进行导出。导出文件格式为csv，导出的日志条数默认不超过10000条。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-4617c6f6a56d7cdbb27b726158991aaa>2 - K8s资源管理</h1></div><div class=td-content><h1 id=pg-f92399d03aa0a6430363c202d149c70d>2.1 - 工作负载管理</h1></div><div class=td-content><h1 id=pg-7b012c2dd566d2198a61d60244ce1169>2.1.1 - Deployment</h1><p>本文档介绍了如何在 KubeCube 上创建、使用和编辑 Deployment。</p><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下创建一个命名空间，创建一个账号并赋予该命名空间操作权限。</p><h2 id=创建-deployment>创建 Deployment</h2><p>1、选择租户和项目，选择集群和空间，展开【工作负载】菜单，点击 【Deployments】，进入 Deployment 管理页面。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/Deployment/deploy-apply.png alt=deploy-apply></p><p>2、点击【部署】，进入创建 Deployment 页面，填写信息后，点击【立即创建】，即可创建一个 Deployment。</p><ul><li>基本信息<ul><li>名称：由小写字母、数字或中划线组成，长度1～63位，以字母开头，字母或数字结尾；</li><li>副本数：默认为1个；</li><li>更新策略<ul><li>最短就绪时间：新创建的副本准备就绪后，被视为可用前需要保持正常的时间下限，单位（秒）；</li><li>最大超预期副本数：可创建的最大超过所需副本的副本数量或百分比；</li><li>最大不可用副本数：更新过程中不可使用的副本数上限个数或百分比；</li></ul></li></ul></li><li>容器配置<ul><li>容器名称：副本运行的容器名称；</li><li>镜像：容器运行的镜像；</li><li>配置：配额设置，包括请求配额（基础配置）、最大配额（配置上限），以及 GPU 配置；</li><li>挂载数据卷：选择已创建的数据卷,并设置挂载目录和子路径等；</li><li>环境变量：配置副本的环境变量；</li><li>容器类型：分为业务容器和 init 容器，init 容器不支持就绪探针，必须可以执行结束。一个 pod 可以有多个 init 容器，它们将依次在业务容器运行前执行。</li><li>启动命令：容器启动时即执行该命令；</li><li>启动命令参数：执行启动命令时所需的参数；</li><li>存活探针：可以开启存活探测器，并配置，具体配置方法可参考 <a href=https://v1-19.docs.kubernetes.io/zh/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/>https://v1-19.docs.kubernetes.io/zh/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/</a>。</li><li>就绪探针：可以开启就绪探测器，并配置，具体配置方法可参考 <a href=https://v1-19.docs.kubernetes.io/zh/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/>https://v1-19.docs.kubernetes.io/zh/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/</a>。</li><li>生命周期-停止前：在容器因 API 请求或者管理事件（诸如存活态探针、启动探针失败、资源抢占、资源竞争等） 而被终止之前，此命令会被调用。</li><li>生命周期-启动后：这个回调在容器被创建之后立即被执行。 但是，不能保证回调会在容器入口点（ENTRYPOINT）之前执行。 没有参数传递给处理程序。</li><li>容器端口：需要在副本的 IP 地址上公开的端口；</li><li>镜像拉取策略：可以选择 Always、Never、IfNotPresent；</li></ul></li><li>高级配置<ul><li>仓库密钥：如果配置的镜像需要密钥拉取，选择已创建的 Secret；</li><li>标签：给该 Deployment 添加标签；</li><li>注释：给该 Deployment 添加注释；</li><li>部署策略：给该 Deployment 添加节点亲和性、副本亲和性、副本反亲和性、容忍等部署规则。</li></ul></li></ul><h2 id=管理-deployment>管理 Deployment</h2><p>选择租户和项目，选择集群和空间，展开【工作负载】菜单，点击【Deployments】，进入 Deployment 管理页面，可以看到该命名空间下的所有 deployment 名称以及状态。</p><p>这里的状态指的是该 deployment 下所有副本的状态。</p><ul><li>desired：预期的副本数；</li><li>updated：已经是最新版本的副本数；</li><li>available：可用副本数；</li><li>unavailable：不可用副本数；</li><li>total：总副本数。</li></ul><p>同时也可以根据名称对列表进行搜索，或对单个 deployment 进行副本数调整、滚动更新、删除，以及修改 Yaml。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/Deployment/deploy-manage.png alt=deploy-manage></p><h2 id=查看-deployment-详情>查看 Deployment 详情</h2><p>在 Deployment 管理页面，点击任一 deployment 名称，可以进入到该 deployment 详情页。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/Deployment/deploy-detail.png alt=deploy-detail></p><p>在 Deployment 详情页，可以查看到 deployment 的具体信息，以及该 deployment 所关联的所有副本的详情、副本的监控数据以及该 deployment 和副本的事件信息和 condition 信息。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-500ff95d0a9229063602362156100f9c>2.1.2 - StatefulSet</h1><p>本文档介绍了如何在 KubeCube 上创建、使用和编辑 StatefulSet。</p><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下一个创建一个命名空间，创建一个账号并赋予该命名空间操作权限。</p><h2 id=创建-statefulset>创建 StatefulSet</h2><p>1、选择租户和项目，选择集群和空间，展开【工作负载】菜单，点击【Statefulsets】，进入StatefulSet 管理页面。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/StatefulSet/statefulset-apply.png alt=statefulset-apply></p><p>2、点击【部署】，编写 statefulset 的 yaml 文件。点击【确定】，即可部署该 statefulset。</p><p>statefulset 的规范可参考：https://v1-20.docs.kubernetes.io/docs/concepts/workloads/controllers/statefulset/。</p><h2 id=管理-statefulset>管理 StatefulSet</h2><p>选择租户和项目，选择集群和空间，展开【工作负载】菜单，点击【Statefulset】，进入 StatefulSet 管理页面。在管理页面，可以看到该命名空间下的所有 statefulSet。</p><p>同时也可以根据名称对列表进行搜索，或对单个 statefulset 进行副本数调整、删除，以及修改 Yaml。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/StatefulSet/statefulset-manage.png alt=statefulset-manage></p><h2 id=查看-statefulset-详情>查看 StatefulSet 详情</h2><p>在 StatefulSet 管理页面，点击任一 statefulSet 名称，即可进入到该 statefulSet 详情页。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/StatefulSet/statefulset-detail.png alt=statefulset-detail></p><p>StatefulSet 详情页除了可以管理 StatefulSet，还可以查看 StatefulSet 的详细信息，关联的副本信息和副本的监控数据，以及 StatefulSet 和关联副本的事件和 condition 信息。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-1c1715029a9653f311b6e7f2eae48dd4>2.1.3 - Job</h1><p>本文档介绍了如何在 KubeCube 上创建、使用和编辑 Job。</p><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下一个创建一个命名空间，创建一个账号并赋予该命名空间操作权限。</p><h2 id=创建-job>创建 Job</h2><p>1、选择租户和项目，选择集群和空间，展开【工作负载】菜单，点击【Job】，进入 Job 管理页面。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/Job/job-apply.png alt=job-apply></p><p>2、点击【部署】，编写 job 的 yaml 文件。点击【确定】，即可部署该 job。</p><p>job 的 规范可参考：https://v1-20.docs.kubernetes.io/docs/concepts/workloads/controllers/job/。</p><h2 id=管理-job>管理 Job</h2><p>选择租户和项目，选择集群和空间，展开【工作负载】菜单，点击【Job】，进入 Job 管理页面。在管理页面，可以看到该命名空间下的所有 job 名称以及对应的状态、执行情况、运行时长，并可以在该界面对 job 进行删除操作。同时也可以根据名称对 job 进行搜索。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/Job/job-manage.png alt=job-manage></p><h2 id=查看-job-详情>查看 Job 详情</h2><p>在 Job 管理页面，点击任一 job 名称，即可进入到该 job 详情页。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/Job/job-detail.png alt=job-detail></p><p>Job 详情页除了可以管理 Job，还可以查看 Job 的详细信息，关联的副本信息和副本的监控数据，以及 Job 和关联副本的事件和 condition 信息。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-359ccce9eb5b678be164211be1ac6674>2.1.4 - CronJob</h1><p>本文档介绍了如何在 KubeCube 上创建、使用和编辑 CronJob。</p><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下一个创建一个命名空间，创建一个账号并赋予该命名空间操作权限。</p><h2 id=创建-cronjob>创建 CronJob</h2><p>1、选择租户和项目，选择集群和空间，展开【工作负载】菜单，点击【CronJob】，进入 CronJob 管理页面。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/CronJob/cronjob-apply.png alt=cronjob-apply></p><p>2、点击【部署】，编写 CronJob 的 yaml 文件。点击【确定】，即可部署该 CronJob。</p><p>CronJob 的 规范可参考：https://v1-20.docs.kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/。</p><h2 id=管理-cronjob>管理 CronJob</h2><p>选择租户和项目，选择集群和空间，展开【工作负载】菜单，点击【CronJob】，进入 CronJob 管理页面。在管理页面，可以看到该命名空间下的所有 CronJob ，包括对应的名称、空间、状态、定时调度设置、正在运行的任务数以及创建时间。并可以在该界面对 CronJob 进行删除和修改操作。同时也可以根据名称对 CronJob 进行搜索。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/CronJob/cronjob-manage.png alt=cronjob-manage></p><h2 id=查看-cronjob-详情>查看 CronJob 详情</h2><p>在 CronJob 管理页面，点击任一 CronJob 名称，即可进入到该 CronJob 详情页。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/CronJob/cronjob-detail.png alt=cronjob-detail></p><p>CronJob 详情页除了可以管理 CronJob，还可以查看 CronJob 的详细信息，根据状态过滤该 CronJob 关联的任务列表，以及查看该 CronJob 和该 CronJob 所关联的副本的事件。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-d4b33d551e5eb6dd7a8d90fbeeaa23ae>2.1.5 - Pod</h1><p>本文档介绍了如何在 KubeCube 上管理 Pods。</p><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下一个创建一个命名空间，创建一个账号并赋予该命名空间操作权限。</p><h2 id=管理-pod>管理 Pod</h2><p>选择租户和项目，选择集群和空间，展开【工作负载】菜单，点击【Pod】，进入 Pod 管理页面。在管理页面，可以看到该命名空间下的所有 pod，包括每个 pod 的名称、IP、状态、重启次数、CPU 使用量、内存使用量以及创建时间。</p><p>同时也可以根据名称对列表进行搜索，或对单个 pod 进行查看和删除。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/Pod/pod-manage.png alt=pod-manage></p></div><div class=td-content style=page-break-before:always><h1 id=pg-567f7238e4941a79e1ce1cf4cac8a2d5>2.1.6 - CRD</h1><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下一个创建一个命名空间，创建一个账号并赋予该命名空间操作权限。</p><h2 id=创建-crd>创建 CRD</h2><p>选择租户和项目，选择集群和空间，点击左侧【自定义资源 CRD】，进入自定义资源列表页面。点击【创建自定义资源】可以以 YAML 的模式创建自定义资源 CRD。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/CRD/manage.png alt=manage></p><h2 id=创建-cr>创建 CR</h2><p>在 CRD 列表页面，点击具体一条记录的版本，进入 CRD 关联的实例页面，可以管理和创建相应的 CR。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/CRD/createcr.png alt=creatercr></p></div><div class=td-content style=page-break-before:always><h1 id=pg-b0384913470a4be6d30a31aa6569ba7b>2.1.7 - DaemonSet</h1><p>本文档介绍了如何在 KubeCube 上创建、使用和编辑 DaemonSet。</p><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下创建一个命名空间，创建一个账号并赋予该命名空间操作权限。</p><h2 id=创建-daemonset>创建 DaemonSet</h2><p>1、选择租户和项目，选择集群和空间，展开【工作负载】菜单，点击 【DaemonSets】，进入 DaemonSet 管理页面。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/DaemonSet/daemonset-apply.png alt=daemonset-apply></p><p>2、点击【部署】，编写 daemonSet 的 yaml 文件。点击【确定】，即开始部署该 daemonSet。</p><p>daemonSet 的 规范可参考：https://v1-20.docs.kubernetes.io/zh/docs/concepts/workloads/controllers/daemonset/。</p><p>注意，daemonSet 的 namespace 应与当前所在 namespace 一致。</p><h2 id=管理-daemonset>管理 DaemonSet</h2><p>选择租户和项目，选择集群和空间，展开【工作负载】菜单，点击【DaemonSets】，进入 DaemonSet 管理页面，可以看到该命名空间下的所有 daemonSet，包括名称、级别以及创建时间。</p><p>同时也可以根据名称对列表进行搜索，或对单个 daemonSet 进行删除或修改。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/DaemonSet/daemonset-manage.png alt=daemonset-manage></p><h2 id=查看-daemonset-详情>查看 DaemonSet 详情</h2><p>在 DaemonSet 管理页面，点击任一 daemonSet 名称，可进入到该 daemonSet 详情页。</p><p><img src=/imgs/user-guide/ns-scoped-res/workload/DaemonSet/daemonset-detail.png alt=daemonset-detail></p><p>在 DaemonSet 详情页，可以查看到 daemonSet 的具体信息，以及该 daemonSet 所关联的所有副本的详情、副本的监控数据以及该 daemonSet 和副本的事件信息和 condition 信息。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ee61de2534aadcceda73d6d0ab9b344e>2.2 - 服务与发现</h1></div><div class=td-content><h1 id=pg-22aff6c7da936928435b042b223fe5c1>2.2.1 - Service</h1><p>本文档介绍了如何在 KubeCube 上创建、使用和编辑 Service。</p><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下一个创建一个命名空间，在命名空间下创建一个 Deployment，创建一个账号并赋予该命名空间操作权限。</p><h2 id=创建-service>创建 Service</h2><p>1、选择租户和项目，选择集群和空间，展开【服务与发现】菜单，点击【Services】菜单按钮，进入 Service 管理页面。</p><p><img src=/imgs/user-guide/ns-scoped-res/service-discovery/service/manage.png alt=manage.png></p><p>2、点击【创建服务】按钮，进入创建服务页面，填写信息后，点击【立即创建】按钮，即可创建一个 Service。</p><p><img src=/imgs/user-guide/ns-scoped-res/service-discovery/service/create.png alt=create.png></p><ul><li><p>名称：输入服务名称</p></li><li><p>类型：选择服务类型为 ClusterIP 或者 NodePort</p></li><li><p>使用方式：对于 ClusterIP 类型，需要选择使用方式为常规服务、Headless 服务或外部服务</p></li><li><p>Selector：选择关联的工作负载，支持高级自定义</p></li><li><p>标签：定义标签</p></li><li><p>Ports：添加应用端口与服务端口的映射关系</p></li><li><p>会话保持：开通/关闭会话保持</p></li></ul><h2 id=管理-service>管理 Service</h2><p>选择租户和项目，选择集群和空间，展开【服务与发现】菜单，点击【Services】菜单按钮，进入 Service 管理页面，可以对 Service 列表进行设置重编辑，删除和 Yaml 设置。</p><p><img src=/imgs/user-guide/ns-scoped-res/service-discovery/service/manage.png alt=manage.png></p><h2 id=查看-service-详情>查看 Service 详情</h2><p>在 Service 管理页面，点击具体一条服务名称，进入 Service 详情页面。</p><p><img src=/imgs/user-guide/ns-scoped-res/service-discovery/service/servicedetail.png alt=servicedetail.png></p><p>Service 详情页面除了可以管理 Service，还可以查看 Service 的详细信息、关联的副本信息和事件信息，支持设置 Nginx Ingress 类型的对外服务端口供外部访问。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-866cdaed77cae1df8312e1634fe342d5>2.2.2 - Ingress</h1><p>本文档介绍了如何在 KubeCube 上创建、使用和编辑 Ingress。KubeCube 默认使用 Nginx Ingress。</p><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下一个创建一个命名空间，命名空间下创建一个 Service，创建一个账号并赋予该命名空间操作权限。</p><h2 id=创建-ingress>创建 Ingress</h2><p>1、选择租户和项目，选择集群和空间，展开【服务与发现】菜单，点击【Ingresses】菜单按钮，进入 Ingress 管理页面。</p><p><img src=/imgs/user-guide/ns-scoped-res/service-discovery/ingress/manage.png alt=manage.png></p><p>2、点击【创建负载均衡】按钮，进入创建负载均衡页面，填写信息后，点击【立即创建】按钮，即可创建一个 Ingress。</p><p><img src=/imgs/user-guide/ns-scoped-res/service-discovery/ingress/create.png alt=create.png></p><ul><li><p>名称：输入 Ingress 名称</p></li><li><p>端口：选择对外暴露访问的端口</p></li><li><p>调度算法：选择负载均衡轮询策略</p></li><li><p>转发规则：设置 Host，设置 Path 与 Service 端口的映射关系，可以添加多条转发规则</p></li><li><p>会话保持：开通/关闭会话保持</p></li></ul><h2 id=管理-ingress>管理 Ingress</h2><p>选择租户和项目，选择集群和空间，展开【服务与发现】菜单，点击【Ingresses】菜单按钮，进入 Ingress 管理页面，可以对 Ingress 列表进行设置重编辑，删除和 Yaml 设置。</p><p><img src=/imgs/user-guide/ns-scoped-res/service-discovery/ingress/manage.png alt=manage.png></p><h2 id=查看-ingress-详情>查看 Ingress 详情</h2><p>在 Ingress 管理页面，点击具体一条 Ingress 记录的名称，进入详情页面。</p><p><img src=/imgs/user-guide/ns-scoped-res/service-discovery/ingress/ingressdetail.png alt=ingressdetail.png></p><p>Ingress 详情页面除了可以管理 Ingress，还可以查看 Ingress 的详细信息、关联的 Service 信息和事件信息。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-dfe90e26dd8c5f2bbd351b3c8a3f04f1>2.3 - 配置管理</h1></div><div class=td-content><h1 id=pg-498270f9948d4c7c2fbbc06e6f83f203>2.3.1 - Secret</h1><p>本文档介绍了如何在 KubeCube 上创建、使用和编辑 Secret。</p><p>Kubernetes Secret 用于存储和管理一些敏感数据，比如密码密钥等敏感信息。它把 Pod 想要访问的加密数据存放到 Etcd 中。然后用户就可以通过在 Pod 的容器里挂载 Volume 的方式或者环境变量的方式访问 Secret 里保存的信息。</p><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下一个创建一个命名空间，创建一个账号并赋予该命名空间操作权限。</p><h2 id=创建-secret>创建 Secret</h2><p>1、选择租户和项目，选择集群和空间，展开【配置】菜单，点击【Secret】菜单按钮，进入 Secret 管理页面。</p><p><img src=/imgs/user-guide/ns-scoped-res/config/secret/manage.png alt=manage.png></p><p>2、点击【创建 Secret】按钮，进入创建 Secret 页面，填写信息后，点击【立即创建】按钮，即可创建一个 Secret。</p><p><img src=/imgs/user-guide/ns-scoped-res/config/secret/create.png alt=create.png></p><ul><li>名称：输入 Secret 名称。</li><li>类型：<ul><li>Opaque：base64 编码格式的 Secret，用来存储密码、密钥等。</li><li>DockerConfigJson ： 用来存储私有 docker registry 的认证信息。</li><li>IngressTLS：配置 Ingress TLS 密钥。</li></ul></li><li>根据选择的类型，输入相应的信息。</li></ul><h2 id=查看-secret-详情>查看 Secret 详情</h2><p>在 Secret 管理页面，点击具体一条 Secret 记录的名称，进入详情页面查看 Secret 的详细信息。</p><p><img src=/imgs/user-guide/ns-scoped-res/config/secret/detail.png alt=detail.png></p></div><div class=td-content style=page-break-before:always><h1 id=pg-c0919adee8d182e2019d6d5ebbb44d54>2.3.2 - ConfigMap</h1><p>本文档介绍了如何在 KubeCube 上创建、使用和编辑 ConfigMap。</p><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下一个创建一个命名空间，创建一个账号并赋予该命名空间操作权限。</p><h2 id=创建-configmap>创建 ConfigMap</h2><p>1、选择租户和项目，选择集群和空间，展开【配置】菜单，点击【ConfigMap】菜单按钮，进入 ConfigMap 管理页面。</p><p><img src=/imgs/user-guide/ns-scoped-res/config/configmap/manage.png alt=manage.png></p><p>2、点击【创建 ConfigMap】按钮，进入创建 ConfigMap 页面，填写信息后，点击【立即创建】按钮，即可创建一个 ConfigMap。</p><p><img src=/imgs/user-guide/ns-scoped-res/config/configmap/create.png alt=create.png></p><ul><li>名称：输入 ConfigMap 名称。</li><li>数据：输入键值对形式的数据信息。</li></ul><h2 id=管理-configmap>管理 ConfigMap</h2><p>选择租户和项目，选择集群和空间，展开配置菜单，点击 ConfigMap 菜单按钮，进入 ConfigMap 管理页面。在 ConfigMap 管理页面可以对 ConfigMap 进行设置、删除和 Yaml 设置。</p><p><img src=/imgs/user-guide/ns-scoped-res/config/configmap/manage2.png alt=manage2.png></p><h2 id=查看-configmap-详情>查看 ConfigMap 详情</h2><p>在 ConfigMap 管理页面，点击具体一条 ConfigMap 记录的名称，进入详情页面查看 ConfigMap 的详细信息。</p><p><img src=/imgs/user-guide/ns-scoped-res/config/configmap/detail.png alt=detail.png></p></div><div class=td-content style=page-break-before:always><h1 id=pg-79b55e097198558e403125cdfbc32689>2.4 - 存储管理</h1></div><div class=td-content><h1 id=pg-dc0724a49c70a4409332e139d6e548cc>2.4.1 - PVC</h1><p>本文档介绍了如何在 KubeCube 上创建、使用和编辑 PVC（Persistent Volume Claim）。</p><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下一个创建一个命名空间，创建一个账号并赋予该命名空间操作权限。</p><h2 id=创建-pvc>创建 PVC</h2><p>1、选择租户和项目，选择集群和空间，点击【存储】菜单，进入 PVC 管理页面。在管理页面可以进行 PVC 记录的添加、设置、删除和 Yaml 设置。</p><p><img src=/imgs/user-guide/ns-scoped-res/storage/pvc/manage1.png alt=manage1.png></p><p>2、点击【创建存储声明】，弹出创建存储声明的窗口。</p><p><img src=/imgs/user-guide/ns-scoped-res/storage/pvc/create.png alt=create.png></p><ul><li>存储类别：选择存储类别，存储类别可以在集群管理页面添加</li><li>名称：存储声明名称</li><li>容量：填写所需存储容量</li><li>模式：独占读写（ ReadWriteOnce：读写权限，并且只能被单个节点挂载 ）、只读共享（ ReadOnlyMany：只读权限，允许被多个节点挂载 ）、共享读写（ ReadWriteMany：读写权限，允许被多个节点挂载 ）</li></ul><h2 id=查看-pvc-详情>查看 PVC 详情</h2><p>在 PVC 管理页面选择一条 PVC 记录，可以查看该 PVC 记录的详细信息，可以查看绑定的副本信息和监控信息。并且可以管理操作，包括删除、设置和 Yaml 设置。</p><p><img src=/imgs/user-guide/ns-scoped-res/storage/pvc/detail.png alt=detail.png></p></div><div class=td-content style=page-break-before:always><h1 id=pg-82e8b1c2057cbb52f8b8bf3f153fab19>2.5 - 其他</h1></div><div class=td-content><h1 id=pg-cf4b1f8c4b2aa8cb554e7e20df5d61ff>2.5.1 - 密钥管理</h1><p>本文档介绍了如何在 KubeCube 上进行密钥管理。</p><p>密钥管理提供 AccessKey 和 SecretKey 供用户系统调用 OpenAPI 接口时进行认证。</p><h2 id=管理密钥>管理密钥</h2><p>用户登录后，鼠标移动到右上角用户名称，在下拉菜单中点击【密钥管理】，进入密钥管理页面。在密钥管理页面可以添加密钥、删除密钥和查看密钥信息。</p><p><img src=/imgs/user-guide/ns-scoped-res/others/key-manage/keymanage.png alt=keymanage.png></p><h2 id=使用密钥>使用密钥</h2><p>使用 AccessKey 和 SecretKey 可以获取用户 token，将token放到请求头可以请求 KubeCube 的 OpenAPI 接口。</p><p>HTTP Request：</p><pre><code>GET /api/v1/cube/key/token
</code></pre><p>Query Parameters：</p><table><thead><tr><th style=text-align:left>Parameter</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>accessKey</code></td><td style=text-align:left>AccessKey</td></tr><tr><td style=text-align:left><code>secretKey</code></td><td style=text-align:left>SecretKey</td></tr></tbody></table><p>Response：</p><table><thead><tr><th style=text-align:left>Code</th><th style=text-align:left>Info</th></tr></thead><tbody><tr><td style=text-align:left><code>200</code></td><td style=text-align:left>{&ldquo;token&rdquo;: &ldquo;token info&rdquo;}</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-ce8d51f35837b81d146741b8306c0c6f>2.5.2 - Yaml 编排</h1><p>本文档介绍了如何在 KubeCube 上使用 YAML 编排。</p><h2 id=准备工作>准备工作</h2><p>创建一个租户，在租户下创建一个项目，在项目下一个创建一个命名空间，创建一个账号并赋予该命名空间操作权限。</p><h2 id=yaml-编排>YAML 编排</h2><p>选择租户和项目，选择集群和空间，点击【 YAML 编排】 菜单，弹出 YAML 编排界面。</p><p><img src=/imgs/user-guide/ns-scoped-res/others/yaml-deploy/yamlcreate.png alt=yamlcreate.png></p><p>填写要创建的资源的 YAML 格式定义，或者从文件导入，或者从已有资源导入，编辑完成后点击【确定】完成 YAML 编排。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-d26f47acb6f925b7521fd59667a4a801>3 - 日志</h1></div><div class=td-content><h1 id=pg-11d2cfb667600c3b8e11bc0885b7b986>3.1 - 采集任务管理</h1></div><div class=td-content style=page-break-before:always><h1 id=pg-53c8ff58fbe5aeddb5e1755c6ffb3f3a>3.2 - 日志查询</h1></div><div class=td-content style=page-break-before:always><h1 id=pg-0ec2263ff6b9810ff122b6aed8649ca7>4 - 告警管理</h1></div><div class=td-content><h1 id=pg-0c5f8f68798389347320b5964e58ebb2>4.1 - 告警规则管理</h1><p>包含告警静默、升级、抑制</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ebcc4bef1acb97bdd97392135c05263b>4.2 - 告警联系人管理</h1></div><div class=td-content style=page-break-before:always><h1 id=pg-730f2f20353b81badf2cd1538e1cc349>4.3 - 告警历史</h1></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/kubecube-io/kubecube aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2021 KubeCube Project Authors All Rights Reserved</small>
<small class=ml-1><a href=http://www.apache.org/licenses/LICENSE-2.0 target=_blank rel=noopener>隐私政策</a></small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js integrity="sha256-OxcsE7YsK+qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin=anonymous></script></body></html>